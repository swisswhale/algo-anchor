{% extends "base.html" %} {% load static %} {% block extra_css %}
<link rel="stylesheet" href="{% static 'css/dashboard.css' %}" />
{% endblock %} {% block content %}
<div class="mb-4 text-center">
  <h2 class="fw-bold">ğŸ“Š Your Strategies</h2>
  <p class="text-muted">
    Manage, backtest, and review your mean reversion strategies.
  </p>
</div>

<div class="text-end mb-3">
  <a href="{% url 'strategy_create' %}" class="btn btn-sm btn-success"
    >+ New Strategy</a
  >
</div>

{% if strategies %}
<table class="table table-hover bg-white rounded shadow-sm">
  <thead class="table-light">
    <tr>
      <th>Name</th>
      <th>Lookback</th>
      <th>Entry Threshold</th>
      <th>Exit Rule</th>
      <th>Created</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {% for strategy in strategies %}
    <tr>
     <td>
  <form method="post" action="{% url 'strategy_rename' strategy.pk %}" class="d-inline">
    {% csrf_token %}
    <input
      type="text"
      name="name"
      value="{{ strategy.name }}"
      class="form-control form-control-sm d-inline-block w-auto editable-name"
      style="border: none; background: transparent; font-weight: 500;"
      title="Click to edit strategy name"
      onfocus="this.style.background='#fff'; this.style.border='1px solid #ccc'"
      onblur="this.form.submit();"
    />
  </form>
</td>
      <td>{{ strategy.lookback_days }}</td>
      <td>{{ strategy.entry_threshold }}</td>
      <td>{{ strategy.exit_rule }}</td>
      <td>{{ strategy.created_at|date:"M d, Y" }}</td>
      <td class="text-end">
        <a href="{% url 'strategy_detail' strategy.pk %}" class="btn btn-sm btn-outline-primary">View</a>
        <a href="{% url 'strategy_detail' strategy.pk %}" class="btn btn-sm btn-outline-primary">Edit</a>
        <a href="{% url 'strategy_delete' strategy.pk %}" class="btn btn-sm btn-danger d-inline-flex align-items-center"> &#9888; Delete</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<div class="alert alert-info text-center">
  No strategies found yet. Click "New Strategy" to get started.
</div>
{% endif %} {% endblock %}
